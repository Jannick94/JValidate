jQuery(function(e){"use strict";e.fn.jvalidate=function(a){function t(a,t,s,r){if(r=r||void 0,s)s&&(a.siblings("span.jvalidate-error-message").remove(),a.removeClass("has-error").addClass("is-valid"));else if(a.addClass("has-error").removeClass("is-valid"),A.errorMessage&&!a.siblings("span.jvalidate-error-message").length>0){if(void 0!==r)try{o=messages[t].replace("%arg%",r)}catch(i){o=messages["default"]}else o=messages[t];u=a.data("validate-message")||o,e("<span />",{"class":"text-danger jvalidate-error-message",text:u}).insertAfter(a)}}var s,r,i,l,n,d,o,v,c,f,u,m,g,p,b,h,y,k,w,x,A=e.extend({errorMessage:!1,validationDelay:400,debug:!1,onRemoteDone:function(){}},a),D=[],j=function(){var e=0;return function(a,t){clearTimeout(e),e=setTimeout(a,t)}}();n=this,n.serialize(),n.find("[data-validate]").each(function(a,n){r=e(n),r.on("keyup blur change",function(a){h=a.which,v=!0,0!=h&&9!=h&&(s=e(this).data("validate").split("|"),i=e(this),i.attr("autocomplete","false"),e.each(s,function(a,s){if(l=[],c=s.split(/:(.+)?/),d=c[0],c.length>1&&(l=c[1]),v)switch(d){case"required":0===e.trim(i.val()).length&&(v=!1),t(i,d,v);break;case"group":l.length<1&&(l=1),y=i.find('input[type="checkbox"]:checked, input[type="radio"]:checked').length,l>y&&(v=!1),t(i,d,v,l);break;case"iban":IBAN.isValid(i.val())||(v=!1),t(i,d,v);break;case"number":var r=/^\d+$/;r.test(i.val())||(v=!1),t(i,d,v);break;case"email":var r=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;r.test(i.val())||(v=!1),t(i,d,v);break;case"regex":var n=new RegExp("["+l+"]$","i");n.test(i.val())||(v=!1),t(i,d,v);break;case"minlength":e.trim(i.val()).length<l&&(v=!1),t(i,d,v,l);break;case"maxlength":e.trim(i.val()).length>l&&(v=!1),t(i,d,v,l);break;case"min":var o=parseFloat(l),u=parseFloat(i.val());o>u&&(v=!1),t(i,d,v,l);break;case"max":var o=parseFloat(l),u=parseFloat(i.val());NaN!==o&&NaN!==u&&u>o&&(v=!1),t(i,d,v,l);break;case"url":var r=/[(http(s)?):\/\/(www\.)?a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)/gi;r.test(i.val())||(v=!1),t(i,d,v);break;case"remote":b=d,g=i,p=l,f=i.data("validate-delay")||A.validationDelay,m=i.data("validate-valid"),0!==e.trim(i.val()).length?j(function(){e.ajax({url:p,type:"POST",data:{data:g.val()}}).done(function(a){a=e.parseJSON(a),a!==m?(v=!1,t(g,b,v),A.onRemoteDone(a)):(v=!0,t(g,b,v),A.onRemoteDone(a))})},f):v=!1;break;case"custom":window[l](i.val())||(v=!1),t(i,d,v);break;case"same":var h=e(l),D=i.data("name")||"",$=h.data("name")||"";i.val()!=h.val()&&(v=!1),t(i,d,v,$),t(h,d,v,D);break;case"date":var z=l.toLowerCase(),N=e.trim(i.val()),C=new Array;if("dd-mm-yyyy"==z)if(/^\d{1,2}-\d{1,2}-\d{4}$/.test(N)){var I=N.split("-");C=[0,1,2]}else v=!1;else if("dd/mm/yyyy"==z)if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(N)){var I=N.split("/");C=[0,1,2]}else v=!1;else if("yyyy-mm-dd"==z)if(/^\d{4}-\d{1,2}-\d{1,2}$/.test(N)){var I=N.split("-");C=[2,1,0]}else v=!1;else if("yyyy/mm/dd"==z)if(/^\d{4}\/\d{1,2}\/\d{1,2}$/.test(N)){var I=N.split("/");C=[2,1,0]}else v=!1;if(1==v){var F=parseInt(I[C[0]],10),O=parseInt(I[C[1]],10),R=parseInt(I[C[2]],10);if(1e3>R||R>3e3||0==O||O>12)v=!1;else{var Z=[31,28,31,30,31,30,31,31,30,31,30,31];(R%400==0||R%100!=0&&R%4==0)&&(Z[1]=29),(0>=F||F>Z[O-1])&&(v=!1)}}t(i,d,v,l);break;case"file":i[0].files.length>0?(x=l.split(","),k=i[0].files[0].name,w=k.lastIndexOf("."),-1!=w&&(k=k.substr(w),"."===k.charAt(0)&&(k=k.substr(1))),-1===x.indexOf(k)&&(v=!1)):v=!1,t(i,d,v)}}))})}),n.on("submit",function(a){D=[],n.find("[data-validate]").each(function(a,t){e(t).trigger("keyup"),D.push(v)}),e("[data-validate].has-error:first").focus(),A.debug&&(a.preventDefault(),console.debug("Debug: on | Submit always canceled"),console.debug("Boolean array of form:  "+D)),D.every(Boolean)||a.preventDefault()})}}(jQuery));