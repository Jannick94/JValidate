$(function(){"use strict";$.fn.jvalidate=function(e){function a(e,a,t,s){if(s=s||void 0,t)t&&(e.siblings("span.jvalidate-error-message").remove(),e.removeClass("has-error").addClass("is-valid"));else if(e.addClass("has-error").removeClass("is-valid"),x.errorMessage&&!e.siblings("span.jvalidate-error-message").length>0){if(void 0!==s)try{d=messages[a].replace("%arg%",s)}catch(r){d=messages["default"]}else d=messages[a];f=e.data("validate-message")||d,$("<span />",{"class":"text-danger jvalidate-error-message",text:f}).insertAfter(e)}}var t,s,r,i,l,n,d,o,v,c,f,m,u,g,b,p,h,y,k,w,x=$.extend({errorMessage:!1,validationDelay:400,debug:!1,onRemoteDone:function(){}},e),A=[],D=function(){var e=0;return function(a,t){clearTimeout(e),e=setTimeout(a,t)}}();l=this,l.serialize(),l.find("[data-validate]").each(function(e,l){s=$(l),s.on("keyup blur change",function(e){p=e.which,o=!0,0!=p&&9!=p&&(t=$(this).data("validate").split("|"),r=$(this),r.attr("autocomplete","false"),$.each(t,function(e,t){if(i=[],v=t.split(/:(.+)?/),n=v[0],v.length>1&&(i=v[1]),o)switch(n){case"required":0===$.trim(r.val()).length&&(o=!1),a(r,n,o);break;case"group":i.length<1&&(i=1),h=r.find('input[type="checkbox"]:checked, input[type="radio"]:checked').length,i>h&&(o=!1),a(r,n,o,i);break;case"iban":IBAN.isValid(r.val())||(o=!1),a(r,n,o);break;case"number":var s=/^\d+$/;s.test(r.val())||(o=!1),a(r,n,o);break;case"email":var s=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;s.test(r.val())||(o=!1),a(r,n,o);break;case"regex":var l=new RegExp("["+i+"]$","i");l.test(r.val())||(o=!1),a(r,n,o);break;case"minlength":$.trim(r.val()).length<i&&(o=!1),a(r,n,o,i);break;case"maxlength":$.trim(r.val()).length>i&&(o=!1),a(r,n,o,i);break;case"min":var d=parseFloat(i),f=parseFloat(r.val());d>f&&(o=!1),a(r,n,o,i);break;case"max":var d=parseFloat(i),f=parseFloat(r.val());NaN!==d&&NaN!==f&&f>d&&(o=!1),a(r,n,o,i);break;case"url":var s=/[(http(s)?):\/\/(www\.)?a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)/gi;s.test(r.val())||(o=!1),a(r,n,o);break;case"remote":b=n,u=r,g=i,c=r.data("validate-delay")||x.validationDelay,m=r.data("validate-valid"),0!==$.trim(r.val()).length?D(function(){$.ajax({url:g,type:"POST",data:{data:u.val()}}).done(function(e){e=$.parseJSON(e),e!==m?(o=!1,a(u,b,o),x.onRemoteDone(e)):(o=!0,a(u,b,o),x.onRemoteDone(e))})},c):o=!1;break;case"custom":window[i](r.val())||(o=!1),a(r,n,o);break;case"same":var p=$(i),A=r.data("name")||"",j=p.data("name")||"";r.val()!=p.val()&&(o=!1),a(r,n,o,j),a(p,n,o,A);break;case"date":var z=i.toLowerCase(),N=$.trim(r.val()),C=new Array;if("dd-mm-yyyy"==z)if(/^\d{1,2}-\d{1,2}-\d{4}$/.test(N)){var I=N.split("-");C=[0,1,2]}else o=!1;else if("dd/mm/yyyy"==z)if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(N)){var I=N.split("/");C=[0,1,2]}else o=!1;else if("yyyy-mm-dd"==z)if(/^\d{4}-\d{1,2}-\d{1,2}$/.test(N)){var I=N.split("-");C=[2,1,0]}else o=!1;else if("yyyy/mm/dd"==z)if(/^\d{4}\/\d{1,2}\/\d{1,2}$/.test(N)){var I=N.split("/");C=[2,1,0]}else o=!1;if(1==o){var F=parseInt(I[C[0]],10),O=parseInt(I[C[1]],10),R=parseInt(I[C[2]],10);if(1e3>R||R>3e3||0==O||O>12)o=!1;else{var Z=[31,28,31,30,31,30,31,31,30,31,30,31];(R%400==0||R%100!=0&&R%4==0)&&(Z[1]=29),(0>=F||F>Z[O-1])&&(o=!1)}}a(r,n,o,i);break;case"file":r[0].files.length>0?(w=i.split(","),y=r[0].files[0].name,k=y.lastIndexOf("."),-1!=k&&(y=y.substr(k),"."===y.charAt(0)&&(y=y.substr(1))),-1===w.indexOf(y)&&(o=!1)):o=!1,a(r,n,o)}}))})}),l.on("submit",function(e){A=[],l.find("[data-validate]").each(function(e,a){$(a).trigger("blur"),A.push(o)}),$("[data-validate].has-error:first").focus(),x.debug&&(e.preventDefault(),console.debug("Debug: on | Submit always canceled"),console.debug("Boolean array of form:  "+A)),A.every(Boolean)||e.preventDefault()})}}(jQuery));